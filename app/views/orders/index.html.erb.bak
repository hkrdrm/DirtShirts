<h1>Orders</h1>
<p> Click Rows for more detailed information. </p>
<% @orders.each do |order| %>
<div class="name" style="border: 1px solid black;">
  <table width='100%' border='1px solid black'>
  <thead>
    <th width='10%'>Name:</th>
    <th width='10%'>Address:</th>
    <th width='10%'>Address2:</th>
    <th width='10%'>City:</th>
    <th width='10%'>State:</th>
    <th width='10%'>Zipcode:</th>
    <th width='10%'>Country:</th>
    <th width='10%'>Email:</th>
    <th width='10%'>Shipped:</th>
  </thead>

  <tbody>
  <tr>
    <td><%= link_to order.name, order %></td>
    <td><%= order.address %></td>
    <td><%= order.address2 %></td>
    <td><%= order.city %></td>
    <td><%= order.state %></td>
    <td><%= order.zipcode %></td>
    <td><%= order.country %></td>
    <td><%= order.email %></td>
    <td align="center">
      <% if order.shipped %>
      <%= image_tag("shippedIcon.png", :width => 25, :height => 25) %>
      <% else %>
      <%= image_tag("notShippedIcon.png", :width => 25, :height => 25) %>
      <% end %>
    </td>
 </tr> 
 </tbody>
 </table>
  <div class="items" style="display: none;">
  <table width='100%' border='1px solid black'>
  <th width='30%'>Product</th>
  <th width='50%'>Quantity</th>
  <th width='20%'>Total Price</th>
  <% order.line_items.each do |li| %>
  <tr>
    <td><%= li.title %></td>
    <td><%= li.quantity %></td>
    <td align='right'><%= number_to_currency(li.total_price) %></td>
  </tr>
  <% end %>
  <tr>
    <td colspan='2'>Order Total Price</td>
    <td align='right'><b><%= number_to_currency(order.total_pr) %></b></td>
  </tr>
  </table>
  </div>
</div>
<br>
<% end %>
  <script>
    $('div.name').click(function(){
      if($(this).children('div.items').is(":hidden")){
        $(this).children('div.items').slideDown("slow");
      }
      else{
	$(this).children('div.items').hide();
      }
    });
  </script>
